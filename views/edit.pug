extends includes/layout

block content
    if causalCount == 0
        h3.text-center Could not find card...
    else
        h2.text-center Edit Causal Variables:

        .col.d-flex.justify-content-center.text-center
            div.cardborder_untagged
                p
                    b Goal:
                    |  #{card.goal}
                p
                    b Need:
                    |  #{card.need}
                p
                    b Current Solution:
                    |  #{card.current_solution}
                p
                    b Problem:
                    |  #{card.problem}

                p
                    b Solution Ideas:
                    |  #{card.solution_ideas}

                p
                    b Current Benefits:
                    |  #{card.current_benefits}

                p
                    b Comments:
                    |  #{card.comment}
                p
                    b Created By:
                    |  #{card.email}

                p
                    b ------------------------


                //this part is really ugly and hacky but basically 3 different divs with 3,4,5 causal variables
                .form-div1
                    b How many variables do you want to use?
                    br
                    br
                    select#numvars
                        if (causalCount === 3)
                            option(value='option1' selected) 3 Causal Variables
                            option(value='option2') 4 Causal Variables
                            option(value='option3') 5 Causal Variables
                        else if (causalCount === 4)
                            option(value='option1') 3 Causal Variables
                            option(value='option2' selected) 4 Causal Variables
                            option(value='option3') 5 Causal Variables
                        else
                            option(value='option1') 3 Causal Variables
                            option(value='option2') 4 Causal Variables
                            option(value='option3'  selected) 5 Causal Variables


                .form-div3
                    br
                    b Displaying 3-variable causal chain:
                .form-div4
                    br
                    b Displaying 4-variable causal chain:
                .form-div5
                    br
                    b Displaying 5-variable causal chain:

                .form-div5
                    form(method='POST', action='/edit', onsubmit='return checkForm(' +card.id+')')
                        p

                        input(class=card.id type='text' id="r1" name='var5' placeholder=card.var5)
                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")

                        label(for='link45choice1')
                            span.linkbuttons.plusbutton
                              input#link45choice1(class=card.id type='radio' name='link45' value='+')
                              |
                              b +



                        label(for='link45choice2')
                            span.linkbuttons.minusbutton
                              input#link45choice2(class=card.id type='radio' name='link45' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link45}

                        p
                        input(class=card.id type='text' id="r1" name='var4' placeholder=card.var4)

                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")


                        label(for='link34choice1')
                            span.linkbuttons.plusbutton
                              input#link34choice1(class=card.id type='radio' name='link34' value='+')
                              |
                              b +



                        label(for='link34choice2')
                            span.linkbuttons.minusbutton
                              input#link34choice2(class=card.id type='radio' name='link34' value='-')
                              |
                              b --
                        br

                        br
                        p Old link: #{card.link34}

                        p
                        input(class=card.id type='text' id="r1" name='var3' placeholder=card.var3)


                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")


                        label(for='link23choice1')
                            span.linkbuttons.plusbutton
                              input#link23choice1(class=card.id type='radio' name='link23' value='+')
                              |
                              b +



                        label(for='link23choice2')
                            span.linkbuttons.minusbutton
                              input#link23choice2(class=card.id type='radio' name='link23' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link23}


                        p
                        input(class=card.id type='text' id="r1" name='var2' placeholder=card.var2)

                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")
                        label(for='link12choice1')
                            span.linkbuttons.plusbutton
                              input#link12choice1(class=card.id type='radio' name='link12' value='+')
                              |
                              b +



                        label(for='link12choice2')
                            span.linkbuttons.minusbutton
                              input#link12choice2(class=card.id type='radio' name='link12' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link12}


                        p
                        input(class=card.id type='text' id="r1" name='var1' placeholder=card.var1)

                        br
                        br
                        //- IMPORTANT - name=card.id has to find the specific card to set that exact tag
                        input(type='submit', name=card.id, value='submit')

                .form-div4
                    form(method='POST', action='/edit', onsubmit='return checkForm(' +card.id+')')
                        p
                        input(class=card.id type='text' id="r1" name='var4' placeholder=card.var4)

                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")


                        label(for='link34choice1')
                            span.linkbuttons.plusbutton
                              input#link34choice1(class=card.id type='radio' name='link34' value='+')
                              |
                              b +



                        label(for='link34choice2')
                            span.linkbuttons.minusbutton
                              input#link34choice2(class=card.id type='radio' name='link34' value='-')
                              |
                              b --
                        br

                        br
                        p Old link: #{card.link34}


                        p
                        input(class=card.id type='text' id="r1" name='var3' placeholder=card.var3)


                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")


                        label(for='link23choice1')
                            span.linkbuttons.plusbutton
                              input#link23choice1(class=card.id type='radio' name='link23' value='+')
                              |
                              b +



                        label(for='link23choice2')
                            span.linkbuttons.minusbutton
                              input#link23choice2(class=card.id type='radio' name='link23' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link23}


                        p
                        input(class=card.id type='text' id="r1" name='var2' placeholder=card.var2)

                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")
                        label(for='link12choice1')
                            span.linkbuttons.plusbutton
                              input#link12choice1(class=card.id type='radio' name='link12' value='+')
                              |
                              b +



                        label(for='link12choice2')
                            span.linkbuttons.minusbutton
                              input#link12choice2(class=card.id type='radio' name='link12' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link12}


                        p
                        input(class=card.id type='text' id="r1" name='var1' placeholder=card.var1)

                        br
                        br
                        //- IMPORTANT - name=card.id has to find the specific card to set that exact tag
                        input(type='submit', name=card.id, value='submit')

                .form-div3
                    form(method='POST', action='/edit', onsubmit='return checkForm(' +card.id+')')

                        p
                        input(class=card.id type='text' id="r1" name='var3' placeholder=card.var3)


                        p
                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")


                        label(for='link23choice1')
                            span.linkbuttons.plusbutton
                              input#link23choice1(class=card.id type='radio' name='link23' value='+')
                              |
                              b +



                        label(for='link23choice2')
                            span.linkbuttons.minusbutton
                              input#link23choice2(class=card.id type='radio' name='link23' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link23}

                        p
                        input(class=card.id type='text' id="r1" name='var2' placeholder=card.var2)

                        p

                        p

                        img(src='/img/long-arrow-right.png' style="width:20%;height:20%,margin-right:20px")
                        label(for='link12choice1')
                            span.linkbuttons.plusbutton
                              input#link12choice1(class=card.id type='radio' name='link12' value='+')
                              |
                              b +


                        label(for='link12choice2')
                            span.linkbuttons.minusbutton
                              input#link12choice2(class=card.id type='radio' name='link12' value='-')
                              |
                              b --

                        br
                        p Old link: #{card.link12}

                        p
                        input(class=card.id type='text' id="r1" name='var1' placeholder=card.var1)

                        br
                        br
                        //- IMPORTANT - name=card.id has to find the specific card to set that exact tag
                        input(type='submit', name=card.id, value='submit')


                //embedded JS to toggle the fields
                script.
                  // set up page according to number of causal variables passed in
                  $(document).ready(function(){
                    var selected = $('#numvars option:selected').text();
                        console.log(selected);
                        $('.form-div3').toggle(selected == "3 Causal Variables");
                        $('.form-div4').toggle(selected == "4 Causal Variables");
                        $('.form-div5').toggle(selected == "5 Causal Variables");
                  });

                  // update causal variables as needed if selection is changed

                  $('#numvars').change(function () {
                    var selected = $('#numvars option:selected').text();
                    console.log(selected);
                    $('.form-div3').toggle(selected == "3 Causal Variables");
                    $('.form-div4').toggle(selected == "4 Causal Variables");
                    $('.form-div5').toggle(selected == "5 Causal Variables");

                  });

